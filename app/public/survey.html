<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous"
    />
    <style>
      #modal-window {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: #f7f8;
        z-index: 99;
      }

      #modal-box {
        background: #fff;
        position: absolute;

        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      }
      #x {
        text-align: right;
        margin-right: 3px;
      }
      #modal-content {
        padding: 0 1.4rem 1.4rem;
      }
    </style>
  </head>
  <body>
    <div id="modal-window">
      <div id="modal-box">
        <div id="x">X</div>
        <div id="modal-content">
          <h3>Friend Name</h3>
          <img src="#" />
        </div>
      </div>
    </div>
    <form>
    <div class="container">
      <div class="form-group">
        <label>Name</label>
        <input
          id="userName"
          type="text"
          class="form-control"
          placeholder="Name (Required)"
          required
        />
      </div>
      <div class="form-group">
        <label>Photo</label>
        <input
          id="photo"
          type="text"
          class="form-control"
          placeholder="Link to Profile Photo (Required)"
          required
        />
      </div>
    </div>
    <hr />
    <div class="container">
      <div class="row">
        <div class="col-12 form-group">
          <label for="question1"
            >Your mind is always buzzing with unexplored ideas and plans.</label
          >
          <select name="question1" id="question1" class="form-control">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="question2"
            >Generally speaking, you rely more on your experience than your
            imagination</label
          >
          <select name="question2" id="question2" class="form-control">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="question3"
            >You find it easy to stay relaxed and focused even when there is
            some pressure.</label
          >
          <select name="question3" id="question3" class="form-control">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="question4"
            >You rarely do something just out of sheer curiosity.
          </label>
          <select name="question4" id="question4" class="form-control">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="question5">People can rarely upset you.</label>
          <select name="question5" id="question5" class="form-control">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="question6"
            >It is often difficult for you to relate to other people's
            feelings.</label
          >
          <select name="question6" id="question6" class="form-control">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="question7"
            >In a discussion, truth should be more important than people’s
            sensitivities.</label
          >
          <select name="question7" id="question7" class="form-control">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="question8"
            >You rarely get carried away by fantasies and ideas.</label
          >
          <select name="question8" id="question8" class="form-control">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="question9"
            >You think that everyone’s views should be respected regardless of
            whether they are supported by facts or not.</label
          >
          <select name="question9" id="question9" class="form-control">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="question10"
            >You feel more energetic after spending time with a group of
            people.</label
          >
          <select name="question10" id="question10" class="form-control">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </div>

        <div class="text-center">
          <button
            id="submitButton"
            type="submit"
            class="btn btn-success btn-lg"
          >
            Submit
          </button>
        </div>
      </div>
    </div>
</form>

    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
      integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
      crossorigin="anonymous"
    ></script>

    <script>
      $("#x").click(function (e) {
        $("#modal-window").css("display", "none");
      });
      $("#submitButton").click(function (e) {
        e.preventDefault();

        if(!$("#userName")[0].checkValidity()) {
            alert("fill in name")
            return;
        }
        if(!$("#photo")[0].checkValidity()) {
            alert("fill in photo")
            return;
        }
        
       

        let user = {
          name: $("#userName").val(),
          photo: $("#photo").val(),
          scores: [
            $("#question1").val(),
            $("#question2").val(),
            $("#question3").val(),
            $("#question4").val(),
            $("#question5").val(),
            $("#question6").val(),
            $("#question7").val(),
            $("#question8").val(),
            $("#question9").val(),
            $("#question10").val(),
          ],
        };

        $.ajax({
          method: "POST",
          url: "/api/friends",
          data: user,
        })
          .then((resp) => {
            console.log("response", resp);
            
            let friend = resp.friend;
            let { name, photo } = friend;
            $("#modal-content h3").text(name);
            $("#modal-content img").attr("src", photo);
            $("#modal-window").css("display", "block");
          })
          .catch((err) => {
            console.log(err);
          });
      });
    </script>
  </body>
</html>
